{
    "collab_server" : "",
    "contents" : "#What is the relationship bewteen a species length and/or maximim depth, and whether or not they are listed under CITES?\n\n#This script pulls all nessasary data from the Fish Base database using the library \"rfishabse\"\n\n#\"Working script.R\" compares the mean length of all fish species to the mean length of CITES species(with and without genus \"Hippocampus\")\n\n#\"GLM test.r\" uses Generalized Linear Models to find out if length and/or depth are explanatory variables for species having a CITES code\n\n# Paths and creation of folders ----\n\n# assign working directory to an object\nwkdr <- getwd()\n\n#list of folders we want\nfolders <- c(\"raw data\", \"scripts\", \"figures\", \"data output\")\n\n#create these folders if we dont have them already\nfor(i in 1:length(folders)){\n  if(file.exists(folders[i]) == \"FALSE\") {\n    dir.create(folders[i])\n  }\n}\n\n# create paths to the new folders in the working directory\np.rawdata <- paste(wkdr, \"/raw data/\", sep = \"\")\np.dataoutput <- paste(wkdr, \"/data output/\", sep = \"\")\np.analysis <- paste(wkdr, \"/analysis/\", sep = \"\")\np.figures <- paste(wkdr, \"/figures/\", sep = \"\")\n\n\n\n\n\n# Pulling data from the database-----\n\n#### --- What fish species have a cites code? ---------\n#pull the data for CITES codes of all species\nCITES <- data.frame(stocks(fields = c(\"CITES_Code\"), limit = 33710), stringsAsFactors = FALSE)\n\n#remove all of the NAs only keeping the species that have a CITES code\ncites.r <- CITES[ - which(is.na(CITES$CITES_Code)) , ]\nstr(cites.r)\n#object with names of species that have CITES code\ncites.sp <- cites.r$sciname\n\n#### --- What data can the species function pull for all CITES species? -----\n#Pulling all of the species data for CITES species\ncites.all <- species(cites.sp)\nstr(cites.all)\n\n#the species function seems to make collumns in data frames lists, so this unlists them\nfor(i in 1:length(ncol(cites.all))) {\n  cites.all[ ,i+1] <- unlist(cites.all[ ,i+1])\n}\n\n\n#save cites.all as a csv file\nwrite.csv(cites.all, file = paste(p.rawdata,  \"/Cites.All.csv\", sep = \"\"))\n\n#### --- We are going to be investigating fish length so we can pull morphology data for all species----\n#morphology of all species\nmorph.all <- data.frame(species(fields = species_fields$morph, limit = 40000), stringsAsFactors = FALSE)\n\nstr(morph.all)\ntt <- unlist(morph.all$sciname)\nstr(tt)\nlength(tt)\nmorph.t <- cbind(tt, morph.all[, -1])\n\n#unlisting them ----- COME BACK TO THIS   \nfor(i in 1:length(ncol(morph.all))) {\n  morph.all[ ,i+1] <- unlist(morph.all[ ,i+1])\n}\nstr(morph.all)\nmorph.all$sciname <- lapply(morph.all$sciname, as.character)\nas.character(morph.all$sciname)\n\n#####how to unlist the species names and make them become a character vector?\nwrite.csv(morph.all, file = paste(p.rawdata,  \"/morph.all.csv\", sep = \"\"))\n\n\n\n#### --- Pulling depth data for all species ----\nall.depth <- data.frame(species(fields = species_fields$depth, limit = 40000), stringsAsFactors = FALSE)\n\n# Creating data table n.t3 with CITES data, as well as Length and Max Depth----\n\n#Out of the morphology data for all species I only want the Length, scientific names and species codes\nd.t <- data.frame(cbind(morph.all$sciname, morph.all$Length, morph.all$SpecCode))\nnames(d.t) <- c(\"sciname\", \"Length\", \"SpecCode\")\n\n#I want to know the CITES codes for all species, and still want to keep track of the names and codes assiciated with them\nd.t2 <- data.frame(cbind(CITES$sciname, CITES$CITES_Code, CITES$SpecCode))\nnames(d.t2) <- c(\"sciname\", \"Cites_Code\", \"SpecCode\")\n\n#create a new data frame with both length and CITES codes\nd.t3 <- merge(d.t, d.t2)\n\n#I want to know the max deptj of all species\nn.t <- data.frame(cbind(all.depth$sciname, all.depth$SpecCode, all.depth$DepthRangeDeep))\nnames(n.t) <- c(\"sciname\", \"SpecCode\", \"MaxDepth\")\n\n#merge the lenght/CITES data frame with the depth infomation to have it all in one place \nn.t3 <- data.frame(merge(d.t3, n.t), stringsAsFactors = FALSE)\n\nwrite.csv(n.t3, file = paste(p.rawdata,  \"/LengthDepthCITES.csv\", sep = \"\"))\n",
    "created" : 1482263434573.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "8|32|32|0|\n33|32|34|0|\n35|46|44|0|\n45|72|58|0|\n59|100|81|0|\n82|44|84|0|\n85|0|85|4|\n85|75|106|0|\n",
    "hash" : "1514315126",
    "id" : "B39E47E2",
    "lastKnownWriteTime" : 1482283276,
    "last_content_update" : 1482283276810,
    "path" : "~/Desktop/Personal Project/Personal Project/Main.R",
    "project_path" : "Main.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}